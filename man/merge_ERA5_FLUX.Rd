% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/03_01_merge_ERA5_FLUX.R
\name{merge_ERA5_FLUX}
\alias{merge_ERA5_FLUX}
\title{Merge ERA5 and AmeriFlux Data}
\usage{
merge_ERA5_FLUX(
  filename_FLUX = NULL,
  filename_ERA5 = NULL,
  varname_FLUX = NULL,
  varname_ERA5 = NULL
)
}
\arguments{
\item{filename_FLUX}{(character) The file path to AmeriFlux BASE data downloaded from https://ameriflux.lbl.gov/.}

\item{filename_ERA5}{(character) The file path to a CSV file of meterological data downloaded from ERA5 https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels?tab=overview. Please note that the original ERA5 files are in .nc format. You may want to convert these files into CSV format using the function \code{netcdf_to_csv()}.}

\item{varname_FLUX}{(character) A vector of variable names in AmeriFlux BASE data to be merged with ERA5 data.}

\item{varname_ERA5}{(character) A vector of variable names in ERA5 data to be merged with AmeriFlux BASE data.}
}
\value{
(data.frame) A data frame with the following characteristics:
\itemize{
\item Datetime stamp column named "time" with the format: "\%Y-\%m-\%d \%H:\%M:\%S".
\item Time step of the "time" column is the same with that of AmeriFlux file.
\item It also includes the columns of \code{varname_FLUX}, the columns of \code{varname_ERA5}.
}
}
\description{
This function is used to merge data from AmeriFlux and data from ERA5, ensuring they both have the same start and end timestamps.
}
\note{
Please note that the length of \code{varname_FLUX} must be the same as the length of \code{varname_ERA5}; at the same location, \code{varname_FLUX} and \code{varname_ERA5} should refer to the same variable despite the fact that AmeriFlux and ERA5 may use different names for the same variable. For example, for incoming shortwave radiation, ERA5 uses "ssrd", but AmeriFlux uses "SW_IN".
}
\examples{

# First example
# Point to AmeriFlux data
filename_FLUX <- system.file("extdata", "AMF_BR-Sa1_BASE-BADM_5-5.zip", package = "ERA5Flux")
# Point to ERA5 data
filename_ERA5 <- system.file("extdata", "BR-Sa1_tp_2002_2011.csv", package = "ERA5Flux")
# List AmeriFlux variable(s) to be merged with ERA5
varname_FLUX <- c("P")
# List ERA5 variable(s) to be merged with AmeriFlux
varname_ERA5 <- c("tp")
# Merge AmeriFlux and ERA5 data together
merged_data <- merge_ERA5_FLUX(filename_FLUX, filename_ERA5, varname_FLUX, varname_ERA5)

# Second example
# Point to AmeriFlux data
filename_FLUX <- system.file("extdata", "AMF_US-EvM_BASE-BADM_2-5.zip", package = "ERA5Flux")
# Point to ERA5 data
filename_ERA5 <- system.file("extdata", "US-EvM_ERA_2020_2023_hr.csv", package = "ERA5Flux")
# List AmeriFlux variable(s) to be merged with ERA5
varname_FLUX <- c('SW_IN', 'TA')
# List ERA5 variable(s) to be merged with AmeriFlux
varname_ERA5 <- c('ssrd', 't2m')
# Merge AmeriFlux and ERA5 data together
merged_data <- merge_ERA5_FLUX(filename_FLUX, filename_ERA5, varname_FLUX, varname_ERA5)

}
\author{
Ammara Talib and Junna Wang
}
